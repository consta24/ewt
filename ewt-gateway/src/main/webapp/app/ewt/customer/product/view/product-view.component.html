<ewt-loading [isLoading]="isLoading"></ewt-loading>

<div *ngIf="!isLoading">

  <div class="row">
    <div class="col-md-6 col-12">
      <div class="position-relative">
        <img [src]="currentImage" [alt]="product.name" class="img-fluid w-100"
             style="max-height: 500px; object-fit: cover;">

        <button class="position-absolute top-50 start-0 translate-middle-y btn btn-light" (click)="prevImage()">
          <fa-icon icon="arrow-left" [fixedWidth]="true"></fa-icon>
        </button>
        <button class="position-absolute top-50 end-0 translate-middle-y btn btn-light" (click)="nextImage()">
          <fa-icon icon="arrow-right" [fixedWidth]="true"></fa-icon>
        </button>
      </div>

      <div class="d-flex mt-3">
        <div *ngFor="let img of images; let i = index" class="thumbnail-wrapper me-2">
          <div [ngClass]="{'selected-image': currentImage === img}">
            <img [src]="img"
                 [alt]="product.name + '-' + i"
                 (click)="currentImage = img"
                 class="thumbnail-img"
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-12">
      <div class="row">
        <h3 class="mt-2"><strong>{{product.name}}</strong></h3>
        <h5 class="text-danger">{{product.productVariants[0].price}}â‚¬</h5>
        <div>
          <hr/>
        </div>
        <div *ngFor="let attribute of product.productAttributes" class="mt-2">
          <h6>{{attribute.name}}</h6>
          <div class="d-flex">
            <button *ngFor="let value of attributeValuesMap[attribute.id]"
                    class="btn btn-lg btn-outline-dark me-2"
                    [class.active]="isSelectedAttributeValue(attribute.id, value)"
                    (click)="selectAttributeValue(attribute.id, value)">
              {{value}}
            </button>
          </div>
        </div>


        <div class="mt-2">
          <button class="btn btn-secondary w-100" (click)="addToCart(product)">
            Add To Cart
          </button>
        </div>

        <div class="mt-2">
          <button class="btn btn-primary w-100" (click)="addToCart(product)">
            Buy Now
          </button>
        </div>

        <div>
          <span>{{product.description}}</span>
        </div>
      </div>
    </div>

  </div>
</div>
